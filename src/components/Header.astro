---
import LangSwitcher from "./LangSwitcher.astro";

const { locale, currentPath } = Astro.props;

// Navegación por idioma
const nav = {
  es: [
    ["/es", "Inicio"],
    ["/es/nosotros", "Nosotros"],
    ["/es/tratamientos", "Tratamientos"],
    ["/es/blog", "Blog"],
  ],
  ca: [
    ["/ca", "Inici"],
    ["/ca/nosotros", "Nosaltres"],      // ✅ mismo slug
    ["/ca/tractaments", "Tractaments"],
    ["/ca/blog", "Blog"],
  ],
  en: [
    ["/en", "Home"],
    ["/en/nosotros", "About"],          // ✅ mismo slug
    ["/en/treatments", "Treatments"],
    ["/en/blog", "Blog"],
  ]
}[locale];

// Textos dinámicos
const texts = {
  es: {
    address: "C. de Muntaner 555, Sarrià-Sant Gervasi, Barcelona",
    phoneLabel: "Teléfono",
    bookCta: "PEDIR CITA",
    ariaLang: "Idioma",
  },
  ca: {
    address: "C. de Muntaner 555, Sarrià-Sant Gervasi, Barcelona",
    phoneLabel: "Telèfon",
    bookCta: "DEMANA CITA",
    ariaLang: "Idioma",
  },
  en: {
    address: "C. de Muntaner 555, Sarrià-Sant Gervasi, Barcelona",
    phoneLabel: "Phone",
    bookCta: "BOOK NOW",
    ariaLang: "Language",
  },
}[locale];
---

<header class="site-header">
  <!-- TOPBAR -->
  <div class="topbar">
    <div class="container topbar__inner">
      <div class="contact">
        <span class="addr">{texts.address}</span>
        <span class="sep">|</span>
        <span class="tel">
          {texts.phoneLabel}:
          <span class="telnum">+34 614 37 57 92</span>
        </span>
      </div>

      <nav class="langs" aria-label={texts.ariaLang}>
        <LangSwitcher {currentPath} {locale} />
      </nav>
    </div>
  </div>

  <!-- MAINBAR -->
  <div class="mainbar">
    <div class="container mainbar__inner">
      <a href={nav[0][0]} class="logo" aria-label="Dental Sueca">
        <img src="/assets/logo.svg" alt="Dental Sueca" />
      </a>

      <nav class="nav" aria-label="Principal">
        {nav.map(([href, label]) => <a href={href}>{label}</a>)}
      </nav>

      <a class="cta" href={`${nav[0][0]}/cita`}>{texts.bookCta}</a>
    </div>
  </div>
</header>
